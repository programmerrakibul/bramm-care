// Testimonials Data
const feedbackTestimonials = [
  {
    image: "./assets/img/feedback_1.png",
    imageAlt: "Bramm Care Chaga supplement",
    rating: 5,
    text: "Bramm Care Chaga has been a game-changer for me. My energy feels steady, and my digestion has improved so much. I'm so glad I found this natural supplement!",
    author: "Sarah L.",
    verified: true,
  },
  {
    image: "./assets/img/feedback_2.png",
    imageAlt: "Chaga supplement capsules",
    rating: 5,
    text: "I've been taking Bramm Care Chaga to my routine. I feel more energized and less bloated. It's amazing how much of a difference an natural supplement can make!",
    author: "Laura P.",
    verified: true,
  },
  {
    image: "./assets/img/feedback_3.png",
    imageAlt: "Happy customer",
    rating: 5,
    text: "I've tried other supplements, but nothing compares to this. My digestion has improved so much, and I rarely get sick anymore. Highly recommend Bramm Care Chaga!",
    author: "Heather S.",
    verified: true,
  },
];

// Stories Data
const storiesTestimonials = [
  {
    image: "./assets/img/stories_1.png",
    imageAlt: "Customer story",
    rating: 5,
    text: "I've noticed such a difference since starting Bramm Care Chaga. My energy feels steady all day, and my immune system has been so much stronger. I'm never going back!",
    author: "Sarah L.",
    verified: true,
  },
  {
    image: "./assets/img/stories_2.png",
    imageAlt: "Customer story",
    rating: 5,
    text: "I was skeptical at first, but after two weeks of using Chaga, my energy levels have completely stabilized. No more 3pm crashes! I feel balanced and focused all day long.",
    author: "Hanna J.",
    verified: true,
  },
  {
    image: "./assets/img/stories_3.png",
    imageAlt: "Customer story",
    rating: 5,
    text: "Bramm Care Chaga has been a lifesaver for my energy levels. I feel more balanced and focused throughout the day—absolutely love it!",
    author: "Michael R.",
    verified: true,
  },
];

// Routine Reasons Data
const routineReasons = [
  {
    icon: "./assets/icons/reasone_1.png",
    iconAlt: "Immune system boost",
    title: "Boosts Your Immune System",
    description:
      "Packed with antioxidants to help your body fight off free radicals and support overall immunity.",
  },
  {
    icon: "./assets/icons/reasone_2.png",
    iconAlt: "Gut health improvement",
    title: "Improves Gut Health",
    description:
      "Promotes a balanced microbiome for better digestion and nutrient absorption.",
  },
  {
    icon: "./assets/icons/reasone_3.png",
    iconAlt: "Natural energy enhancement",
    title: "Enhances Natural Energy",
    description: "Provides sustained energy without caffeine or sugar crashes.",
  },
  {
    icon: "./assets/icons/reasone_4.png",
    iconAlt: "Skin health promotion",
    title: "Promotes Skin Health",
    description:
      "Rich in nutrients that support clear, radiant, and healthy-looking skin.",
  },
  {
    icon: "./assets/icons/reasone_5.png",
    iconAlt: "Pure and natural",
    title: "100% Pure and Natural",
    description:
      "Sustainably sourced and free from artificial additives for safe, daily use.",
  },
];

// Ritual Steps Data
const ritualSteps = [
  {
    image: "./assets/img/ritual_1.png",
    imageAlt: "Take Chaga capsules",
    stepNumber: 1,
    title: "Take",
    description:
      "With a glass of water, take 2 Chaga capsules daily—preferably in the morning to start your day right.",
  },
  {
    image: "./assets/img/ritual_2.png",
    imageAlt: "Breathe and relax",
    stepNumber: 2,
    title: "Breathe",
    description:
      "Take a deep breath, knowing you're giving your body powerful antioxidants and nutrients to thrive.",
  },
  {
    image: "./assets/img/ritual_3.png",
    imageAlt: "Thrive throughout the day",
    stepNumber: 3,
    title: "Thrive",
    description:
      "Feel the difference as Chaga supports your energy, digestion, and immune health throughout the day.",
  },
];

// Success Metrics Data
const successMetrics = [
  {
    percentage: "92%",
    description: "Report feeling more energized throughout the day.",
  },
  {
    percentage: "89%",
    description: "Noticed improved digestion and reduced bloating.",
  },
  {
    percentage: "93%",
    description: "Experienced fewer colds and enhanced immune health.",
  },
  {
    percentage: "95%",
    description: "Trust the purity of our all-natural formula.",
  },
];

// Reviews Data
const customerReviews = [
  {
    rating: 5,
    text: "I've tried every health trend out there, but Chaga is different. It's not just another supplement - this is the real deal. My energy is consistent, my digestion is finally balanced, and I feel like myself again.",
    author: "Emma W.",
    verified: true,
  },
  {
    rating: 5,
    text: "After years of relying on coffee and dealing with the crashes, Chaga has changed everything. No jitters, just clean, natural energy that lasts. Plus, my immune system is stronger than ever.",
    author: "Alex W.",
    verified: true,
  },
  {
    rating: 5,
    text: "As someone deeply connected to natural healing, I'm picky about what I put in my body. Chaga has exceeded all my expectations. It's gentle yet powerful - exactly what nature intended.",
    author: "James S.",
    verified: true,
  },
  {
    rating: 5,
    text: "Bramm Care Chaga has truly transformed my routine. My digestion is so much better, and I feel healthier and more vibrant every day. Highly recommend!",
    author: "Sophie L.",
    verified: true,
  },
];

const navbarPromises = [
  {
    icon: "./assets/icons/antioxidants.png",
    alt: "Antioxidants icon",
    text: "Rich in Antioxidants",
  },
  {
    icon: "./assets/icons/immune.png",
    alt: "Immune health icon",
    text: "Boosts Immune Health Naturally",
  },
  {
    icon: "./assets/icons/harvest.png",
    alt: "Harvest icon",
    text: "100% Wild-Harvested & Pure",
  },
  {
    icon: "./assets/icons/antioxidants.png",
    alt: "Antioxidants icon",
    text: "Rich in Antioxidants",
  },
  {
    icon: "./assets/icons/immune.png",
    alt: "Immune health icon",
    text: "Boosts Immune Health Naturally",
  },
  {
    icon: "./assets/icons/harvest.png",
    alt: "Harvest icon",
    text: "100% Wild-Harvested & Pure",
  },
];

const qualities = [
  {
    icon: "./assets/icons/gmo.png",
    alt: "Non-GMO icon",
    text: "Non-GMO",
  },
  {
    icon: "./assets/icons/lactose.png",
    alt: "Lactose free icon",
    text: "Lactose Free",
  },
  {
    icon: "./assets/icons/vegan.png",
    alt: "Vegan icon",
    text: "Vegan",
  },
  {
    icon: "./assets/icons/glutan.png",
    alt: "Gluten free icon",
    text: "Gluten Free",
  },
  {
    icon: "./assets/icons/gmo.png",
    alt: "Non-GMO icon",
    text: "Non-GMO",
  },
  {
    icon: "./assets/icons/lactose.png",
    alt: "Lactose free icon",
    text: "Lactose Free",
  },
  {
    icon: "./assets/icons/vegan.png",
    alt: "Vegan icon",
    text: "Vegan",
  },
  {
    icon: "./assets/icons/glutan.png",
    alt: "Gluten free icon",
    text: "Gluten Free",
  },
];

const benefits = [
  {
    icon: "./assets/icons/boost.png",
    alt: "Boost immunity icon",
    text: "Boost Immunity Naturally",
  },
  {
    icon: "./assets/icons/support.png",
    alt: "Support gut health icon",
    text: "Support Gut Health",
  },
  {
    icon: "./assets/icons/enhance.png",
    alt: "Enhance energy icon",
    text: "Enhance Energy and Vitality",
  },
  {
    icon: "./assets/icons/boost.png",
    alt: "Boost immunity icon",
    text: "Boost Immunity Naturally",
  },
  {
    icon: "./assets/icons/support.png",
    alt: "Support gut health icon",
    text: "Support Gut Health",
  },
  {
    icon: "./assets/icons/enhance.png",
    alt: "Enhance energy icon",
    text: "Enhance Energy and Vitality",
  },
];

// Function to generate star rating HTML
function generateStars(rating = 5) {
  let starsHTML = "";
  for (let i = 0; i < rating; i++) {
    starsHTML += `<img src="./assets/icons/primary_star.png" alt="Star" />`;
  }
  return starsHTML;
}

// Card Templates
const cardTemplates = {
  testimonial: (data) => `
    <div class="testimonial-card">
      <div class="testimonial-image">
        <img src="${data.image}" alt="${data.imageAlt}" />
      </div>
      <div class="testimonial-rating">
        ${generateStars(data.rating)}
      </div>
      <p class="testimonial-text">
        ${data.text}
      </p>
      <p class="testimonial-author">
        ${
          data.verified
            ? '<img src="./assets/icons/Check_fill.png" alt="Check Fill" />'
            : ""
        }
        ${data.author} | Verified Customer
      </p>
    </div>
  `,

  routine: (data) => `
    <div class="routine-card">
      <div class="routine-icon">
        <img src="${data.icon}" alt="${data.iconAlt}" />
      </div>
      <h3 class="routine-title">${data.title}</h3>
      <p class="routine-description">
        ${data.description}
      </p>
    </div>
  `,

  ritual: (data) => `
    <div class="ritual-item">
      <div class="step-image">
        <img src="${data.image}" alt="${data.imageAlt}" />
        <span class="step-badge">Step ${data.stepNumber}</span>
      </div>
      <h3 class="step-title">${data.title}</h3>
      <p class="step-description">
        ${data.description}
      </p>
    </div>
  `,

  metric: (data) => `
    <div class="metric-card">
      <h3 class="metric-percentage">${data.percentage}</h3>
      <p class="metric-description">
        ${data.description}
      </p>
    </div>
  `,

  review: (data) => `
    <div class="review-card">
      <div class="review-stars">
        ${generateStars(data.rating)}
      </div>
      <p class="review-text">
        ${data.text}
      </p>
      <p class="review-author">
        ${
          data.verified
            ? '<img src="./assets/icons/Check_fill.png" alt="Verified" />'
            : ""
        }
        ${data.author} | Verified Customer
      </p>
    </div>
  `,
  promise: (data) => `
           <div class="promise-item">
              <div class="promise-icon">
                <img src=${data.icon} alt=${data.alt} />
              </div>
              <span class="promise-text">${data.text}</span>
            </div>
  `,

  quality: (data) => `
           <div class="quality-item">
              <div class="quality-icon">
                <img src=${data.icon} alt=${data.alt} />
              </div>
              <span class="quality-text">${data.text}</span>
            </div>
  `,

  benefit: (data) => `
           <div class="benefit-item">
              <div class="benefit-icon">
                <img src=${data.icon} alt=${data.alt} />
              </div>
              <span class="benefit-text">${data.text}</span>
            </div>
  `,
};

// Reusable Render Cards Function
function renderCards(dataArray, containerId, templateType) {
  const container = document.getElementById(containerId);
  if (!container) {
    return;
  }

  const template = cardTemplates[templateType];
  if (!template) {
    return;
  }

  const cardsHTML = dataArray.map((data) => template(data)).join("");
  container.innerHTML = cardsHTML;
}

// Reusable Swiper Initialization Function
function initSwiper(swiperClass, gridClass, cardClass) {
  let swiperInstance = null;

  function init() {
    const swiperContainer = document.querySelector(`.${swiperClass}`);
    const grid = document.querySelector(`.${gridClass}`);
    const cards = document.querySelectorAll(`.${gridClass} .${cardClass}`);

    if (!swiperContainer || !grid || cards.length === 0) return;

    if (window.innerWidth < 768) {
      // Add Swiper classes for mobile
      if (!swiperInstance) {
        swiperContainer.classList.add("swiper");
        grid.classList.add("swiper-wrapper");
        cards.forEach((card) => {
          card.classList.add("swiper-slide");
        });

        swiperInstance = new Swiper(`.${swiperClass}`, {
          slidesPerView: 1,
          spaceBetween: 16,
          loop: true,
          pagination: {
            el: `.${swiperClass} .swiper-pagination`,
            clickable: true,
          },
          freeMode: true,
          breakpoints: {
            480: {
              slidesPerView: 1,
              spaceBetween: 20,
            },
          },
        });
      }
    } else {
      // Remove Swiper classes for desktop
      if (swiperInstance) {
        swiperInstance.destroy(true, true);
        swiperInstance = null;

        swiperContainer.classList.remove("swiper");
        grid.classList.remove("swiper-wrapper");
        cards.forEach((card) => {
          card.classList.remove("swiper-slide");
        });
      }
    }
  }

  return init;
}

// Initialize Feedback Swiper
const initFeedbackSwiper = initSwiper(
  "feedbackSwiper",
  "feedback-grid",
  "testimonial-card"
);

// Initialize Stories Swiper
const initStoriesSwiper = initSwiper(
  "storiesSwiper",
  "stories-grid",
  "testimonial-card"
);

// Initialize Routine Swiper
const initRoutineSwiper = initSwiper(
  "routineSwiper",
  "routine-grid",
  "routine-card"
);

// Initialize Transformation Swiper
const initTransformationSwiper = initSwiper(
  "transformationSwiper",
  "transformation-grid",
  "transformation-column"
);

// Reusable Accordion Collapse Function
function initAccordionCollapse(radioSelector) {
  let lastChecked = null;
  const radios = document.querySelectorAll(radioSelector);

  radios.forEach((radio) => {
    radio.addEventListener("click", function () {
      if (lastChecked === this) {
        this.checked = false;
        lastChecked = null;
      } else {
        lastChecked = this;
      }
    });
  });
}

// Initialize all swipers on load
window.addEventListener("DOMContentLoaded", () => {
  // Render all cards using the reusable function
  renderCards(feedbackTestimonials, "feedback-grid", "testimonial");
  renderCards(storiesTestimonials, "stories-grid", "testimonial");
  renderCards(routineReasons, "routine-grid", "routine");
  renderCards(ritualSteps, "ritual-grid", "ritual");
  renderCards(successMetrics, "metrics-grid", "metric");
  renderCards(customerReviews, "reviews-grid", "review");
  renderCards(navbarPromises, "promise-container", "promise");
  renderCards(qualities, "quality-container", "quality");
  renderCards(benefits, "benefits-container", "benefit");

  // Initialize FAQ Accordion
  initAccordionCollapse(".faq-radio");

  // Initialize Product Accordion
  initAccordionCollapse(".product-accordion-radio");

  // Product Gallery Navigation
  const galleryImages = [
    "./assets/img/product_slider_1.png",
    "./assets/img/product_slider_2.png",
    "./assets/img/product_slider_3.png",
    "./assets/img/product_slider_4.png",
    "./assets/img/product_slider_5.png",
    "./assets/img/product_slider_6.png",
  ];

  let currentIndex = 0;
  const mainImage = document.querySelector(".main-image");
  const thumbItems = document.querySelectorAll(".thumb-item");
  const prevBtn = document.querySelector(".gallery-prev");
  const nextBtn = document.querySelector(".gallery-next");

  function updateGallery(index) {
    if (!mainImage) return;

    currentIndex = index;
    mainImage.src = galleryImages[currentIndex];

    // Update active thumbnail
    thumbItems.forEach((thumb, i) => {
      if (i === currentIndex) {
        thumb.classList.add("active");
      } else {
        thumb.classList.remove("active");
      }
    });
  }

  // Thumbnail click handlers
  thumbItems.forEach((thumb) => {
    thumb.addEventListener("click", () => {
      const index = parseInt(thumb.getAttribute("data-index"));
      updateGallery(index);
    });
  });

  // Previous button
  if (prevBtn) {
    prevBtn.addEventListener("click", () => {
      currentIndex =
        currentIndex === 0 ? galleryImages.length - 1 : currentIndex - 1;
      updateGallery(currentIndex);
    });
  }

  // Next button
  if (nextBtn) {
    nextBtn.addEventListener("click", () => {
      currentIndex =
        currentIndex === galleryImages.length - 1 ? 0 : currentIndex + 1;
      updateGallery(currentIndex);
    });
  }

  initFeedbackSwiper();
  initStoriesSwiper();
  initRoutineSwiper();
  initTransformationSwiper();
});

// Re-initialize on resize
window.addEventListener("resize", () => {
  initFeedbackSwiper();
  initStoriesSwiper();
  initRoutineSwiper();
  initTransformationSwiper();
});
